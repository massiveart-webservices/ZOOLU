//This File is for Codekit Concatenation
/* **********************************************
     Begin jquery.liveSearch.js
********************************************** *//***
@title:
Live Search

@version:
2.0

@author:
Andreas Lagerkvist

@date:
2008-08-31

@url:
http://andreaslagerkvist.com/jquery/live-search/

@license:
http://creativecommons.org/licenses/by/3.0/

@copyright:
2008 Andreas Lagerkvist (andreaslagerkvist.com)

@requires:
jquery, jquery.liveSearch.css

@does:
Use this plug-in to turn a normal form-input in to a live ajax search widget. The plug-in displays any HTML you like in the results and the search-results are updated live as the user types.

@howto:
jQuery('#q').liveSearch({url: '/ajax/search.php?q='}); would add the live-search container next to the input#q element and fill it with the contents of /ajax/search.php?q=THE-INPUTS-VALUE onkeyup of the input.

@exampleHTML:
<form method="post" action="/search/">

	<p>
		<label>
			Enter search terms<br />
			<input type="text" name="q" />
		</label> <input type="submit" value="Go" />
	</p>

</form>

@exampleJS:
jQuery('#jquery-live-search-example input[name="q"]').liveSearch({url: Router.urlForModule('SearchResults') + '&q='});
***/jQuery.fn.liveSearch=function(e){var t=jQuery.extend({url:"/search-results.php?q=",id:"jquery-live-search",duration:400,typeDelay:400,loadingClass:"loading",onSlideUp:function(){},uptadePosition:!1,defaultValue:"Search"},e),n=jQuery("."+t.id);if(!n.length){n=jQuery('<div class="'+t.id+'"></div>').appendTo(document.body).hide().slideUp(0);jQuery(document.body).click(function(e){var r=jQuery(e.target);r.is("."+t.id)||r.parents("."+t.id).length||r.is("input")||n.slideUp(t.duration,function(){t.onSlideUp()})})}return this.each(function(){var e=jQuery(this).attr("autocomplete","off"),r=parseInt(n.css("paddingLeft"),10)+parseInt(n.css("paddingRight"),10)+parseInt(n.css("borderLeftWidth"),10)+parseInt(n.css("borderRightWidth"),10),i=function(){var t=e.offset(),i={left:t.left,top:t.top,width:e.outerWidth(),height:e.outerHeight()};i.topPos=i.top+i.height;i.totalWidth=i.width-r;n.css({position:"absolute",left:i.left+"px",top:i.topPos+"px",width:i.totalWidth+"px"})},s=function(){i();$(window).unbind("resize",i);$(window).bind("resize",i);n.slideDown(t.duration)},o=function(){n.slideUp(t.duration,function(){t.onSlideUp()})};e.focus(function(){if(this.value!==""&&this.value!=t.defaultValue)if(n.html()==""){this.lastValue="";e.keyup()}else setTimeout(s,1)}).keyup(function(){if(this.value!=this.lastValue){e.addClass(t.loadingClass);var r=this.value;this.timer&&clearTimeout(this.timer);this.timer=setTimeout(function(){if(r.length>2){$.browser.msie&&(r=unescape(encodeURIComponent(r)));jQuery.ajax({url:t.url+r,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",success:function(i){e.removeClass(t.loadingClass);if(i.length&&r.length>2){n.html(i);s()}else o()}})}},t.typeDelay);this.lastValue=this.value}})})};(function(e){e.fn.lightBox=function(t){function n(){r(this,y);return!1}function r(n,r){e("embed, object, select").css({visibility:"hidden"});i();t.imageArray.length=0;t.activeImage=0;if(r.length==1)t.imageArray.push(new Array(n.getAttribute("href"),n.getAttribute("title")));else for(var o=0;o<r.length;o++)t.imageArray.push(new Array(r[o].getAttribute("href"),r[o].getAttribute("title")));while(t.imageArray[t.activeImage][0]!=n.getAttribute("href"))t.activeImage++;s()}function i(){e("body").append('<div id="jquery-overlay"></div><div id="jquery-lightbox"><div id="lightbox-container-image-box"><div id="lightbox-container-image"><img id="lightbox-image"><div style="" id="lightbox-nav"><a href="#" id="lightbox-nav-btnPrev"></a><a href="#" id="lightbox-nav-btnNext"></a></div><div id="lightbox-loading"><a href="#" id="lightbox-loading-link"><img src="'+t.imageLoading+'"></a></div></div></div><div id="lightbox-container-image-data-box"><div id="lightbox-container-image-data"><div id="lightbox-image-details"><span id="lightbox-image-details-caption"></span><span id="lightbox-image-details-currentNumber"></span></div><div id="lightbox-secNav"><a href="#" id="lightbox-secNav-btnClose"><img src="'+t.imageBtnClose+'"></a></div></div></div></div>');var n=v();e("#jquery-overlay").css({backgroundColor:t.overlayBgColor,opacity:t.overlayOpacity,width:n[0],height:n[1]}).fadeIn();var r=m();e("#jquery-lightbox").css({top:r[1]+n[3]/10,left:r[0]}).show();e("#jquery-overlay,#jquery-lightbox").click(function(){d()});e("#lightbox-loading-link,#lightbox-secNav-btnClose").click(function(){d();return!1});e(window).resize(function(){var t=v();e("#jquery-overlay").css({width:t[0],height:t[1]});var n=m();e("#jquery-lightbox").css({top:n[1]+t[3]/10,left:n[0]})})}function s(){e("#lightbox-loading").show();t.fixedNavigation?e("#lightbox-image,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber").hide():e("#lightbox-image,#lightbox-nav,#lightbox-nav-btnPrev,#lightbox-nav-btnNext,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber").hide();var n=new Image;n.onload=function(){e("#lightbox-image").attr("src",t.imageArray[t.activeImage][0]);o(n.width,n.height);n.onload=function(){}};n.src=t.imageArray[t.activeImage][0]}function o(n,r){var i=e("#lightbox-container-image-box").width(),s=e("#lightbox-container-image-box").height(),o=n+t.containerBorderSize*2,a=r+t.containerBorderSize*2,f=i-o,l=s-a;e("#lightbox-container-image-box").animate({width:o,height:a},t.containerResizeSpeed,function(){u()});f==0&&l==0&&(e.browser.msie?g(250):g(100));e("#lightbox-container-image-data-box").css({width:n});e("#lightbox-nav-btnPrev,#lightbox-nav-btnNext").css({height:r+t.containerBorderSize*2})}function u(){e("#lightbox-loading").hide();e("#lightbox-image").fadeIn(function(){a();e('#wrap[class*="template_service_provider"]').size()==0&&f()});p()}function a(){e("#lightbox-container-image-data-box").slideDown("fast");e("#lightbox-image-details-caption").hide();t.imageArray[t.activeImage][1]&&e("#lightbox-image-details-caption").html(t.imageArray[t.activeImage][1]).show();t.imageArray.length>1&&e('#wrap[class*="template_service_provider"]').size()==0&&e("#lightbox-image-details-currentNumber").html(t.txtImage+" "+(t.activeImage+1)+" "+t.txtOf+" "+t.imageArray.length).show()}function f(){e("#lightbox-nav").show();e("#lightbox-nav-btnPrev,#lightbox-nav-btnNext").css({background:"transparent url("+t.imageBlank+") no-repeat"});t.activeImage!=0&&(t.fixedNavigation?e("#lightbox-nav-btnPrev").css({background:"url("+t.imageBtnPrev+") left 15% no-repeat"}).unbind().bind("click",function(){t.activeImage=t.activeImage-1;s();return!1}):e("#lightbox-nav-btnPrev").unbind().hover(function(){e(this).css({background:"url("+t.imageBtnPrev+") left 15% no-repeat"})},function(){e(this).css({background:"transparent url("+t.imageBlank+") no-repeat"})}).show().bind("click",function(){t.activeImage=t.activeImage-1;s();return!1}));t.activeImage!=t.imageArray.length-1&&(t.fixedNavigation?e("#lightbox-nav-btnNext").css({background:"url("+t.imageBtnNext+") right 15% no-repeat"}).unbind().bind("click",function(){t.activeImage=t.activeImage+1;s();return!1}):e("#lightbox-nav-btnNext").unbind().hover(function(){e(this).css({background:"url("+t.imageBtnNext+") right 15% no-repeat"})},function(){e(this).css({background:"transparent url("+t.imageBlank+") no-repeat"})}).show().bind("click",function(){t.activeImage=t.activeImage+1;s();return!1}));l()}function l(){e(document).keydown(function(t){e('#wrap[class*="template_service_provider"]').size()>0&&h(t)})}function c(){e(document).unbind()}function h(e){if(e==null){keycode=event.keyCode;escapeKey=27}else{keycode=e.keyCode;escapeKey=e.DOM_VK_ESCAPE}key=String.fromCharCode(keycode).toLowerCase();(key==t.keyToClose||key=="x"||keycode==escapeKey)&&d();if(key==t.keyToPrev||keycode==37)if(t.activeImage!=0){t.activeImage=t.activeImage-1;s();c()}if(key==t.keyToNext||keycode==39)if(t.activeImage!=t.imageArray.length-1){t.activeImage=t.activeImage+1;s();c()}}function p(){if(t.imageArray.length-1>t.activeImage){objNext=new Image;objNext.src=t.imageArray[t.activeImage+1][0]}if(t.activeImage>0){objPrev=new Image;objPrev.src=t.imageArray[t.activeImage-1][0]}}function d(){e("#jquery-lightbox").remove();e("#jquery-overlay").fadeOut(function(){e("#jquery-overlay").remove()});e("embed, object, select").css({visibility:"visible"})}function v(){var e,t;if(window.innerHeight&&window.scrollMaxY){e=window.innerWidth+window.scrollMaxX;t=window.innerHeight+window.scrollMaxY}else if(document.body.scrollHeight>document.body.offsetHeight){e=document.body.scrollWidth;t=document.body.scrollHeight}else{e=document.body.offsetWidth;t=document.body.offsetHeight}var n,r;if(self.innerHeight){document.documentElement.clientWidth?n=document.documentElement.clientWidth:n=self.innerWidth;r=self.innerHeight}else if(document.documentElement&&document.documentElement.clientHeight){n=document.documentElement.clientWidth;r=document.documentElement.clientHeight}else if(document.body){n=document.body.clientWidth;r=document.body.clientHeight}t<r?pageHeight=r:pageHeight=t;e<n?pageWidth=e:pageWidth=n;arrayPageSize=new Array(pageWidth,pageHeight,n,r);return arrayPageSize}function m(){var e,t;if(self.pageYOffset){t=self.pageYOffset;e=self.pageXOffset}else if(document.documentElement&&document.documentElement.scrollTop){t=document.documentElement.scrollTop;e=document.documentElement.scrollLeft}else if(document.body){t=document.body.scrollTop;e=document.body.scrollLeft}arrayPageScroll=new Array(e,t);return arrayPageScroll}function g(e){var t=new Date;n=null;do var n=new Date;while(n-t<e)}t=jQuery.extend({overlayBgColor:"#000",overlayOpacity:.8,fixedNavigation:!1,imageLoading:"/website/themes/default/plugins/lightbox/images/lightbox-ico-loading.gif",imageBtnPrev:"/website/themes/default/plugins/lightbox/images/lightbox-btn-prev.gif",imageBtnNext:"/website/themes/default/plugins/lightbox/images/lightbox-btn-next.gif",imageBtnClose:"/website/themes/default/plugins/lightbox/images/lightbox-btn-close.gif",imageBlank:"/website/themes/default/plugins/lightbox/images/lightbox-blank.gif",containerBorderSize:10,containerResizeSpeed:400,txtImage:"Image",txtOf:"of",keyToClose:"c",keyToPrev:"p",keyToNext:"n",imageArray:[],activeImage:0},t);var y=this;return this.unbind("click").click(n)}})(jQuery);